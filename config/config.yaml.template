# AI新闻收集与影响分析系统 - 配置模板
# 复制此文件为 config.yaml 并填入真实配置

# 新闻收集配置
news_collection:
  # 收集间隔（分钟）
  collection_interval: 30
  
  # 新闻源配置
  sources:
    # RSS源 - 仅使用中国新闻网财经RSS
    rss_feeds:
      - name: "中国新闻网财经"
        url: "https://www.chinanews.com.cn/rss/finance.xml"
        enabled: true
        max_items: 50
    
    # 禁用所有API源
    api_sources: {}
    
    # 禁用网页爬虫源
    web_scraping: []
  
  # 数据处理配置
  processing:
    enable_keyword_filtering: false  # 禁用关键词过滤
    enable_deduplication: true       # 启用去重功能

# AI分析配置
ai_analysis:
  # DeepSeek配置
  deepseek:
    api_key: "YOUR_DEEPSEEK_API_KEY"  # 请替换为你的DeepSeek API密钥
    base_url: "https://api.deepseek.com/v1"
    model: "deepseek-chat"  # 使用deepseek-chat模型
    thinking_model: "deepseek-reasoner"  # 思考模型（用于重要性分析）
    fallback_model: "deepseek-chat"  # 备用模型
    max_tokens: 2000
    temperature: 0.1
  
  # OpenRouter配置
  openrouter:
    api_key: "YOUR_OPENROUTER_API_KEY"  # 请替换为你的OpenRouter API密钥
    base_url: "https://openrouter.ai/api/v1"
    model: "deepseek/deepseek-r1-0528:free"  # 使用免费的deepseek-r1模型
    max_tokens: 10000
    temperature: 0.1
  
  # 分析参数
  analysis_params:
    timeout: 600  # 调整为10分钟超时时间
    fallback_timeout: 600  # 备用模型的超时时间也为10分钟
    batch_size: 10
    max_concurrent: 5  # 最大并发分析数
    enable_retry: true
    retry_attempts: 2
    retry_delay: 1.0
  
  # 深度分析配置
  deep_analysis:
    enabled: true                    # 是否启用深度分析
    score_threshold: 70              # 触发深度分析的重要性分数阈值
    max_concurrent: 3                # 最大并发深度分析数
    search_timeout: 30               # 百度搜索超时时间（秒）
    max_search_keywords: 5           # 最大搜索关键词数
    report_max_length: 200           # 深度分析报告最大长度
    enable_score_adjustment: true    # 是否启用分数重新评估
    search_retry_count: 2            # 搜索失败重试次数
    max_tokens: 100000               # 深度分析最大输出token

# 邮件发送配置
email:
  smtp:
    server: "smtp.163.com"  # 163邮箱SMTP服务器
    port: 465               # 163邮箱SSL端口（推荐）或587（TLS端口）
    username: "your_email@163.com"  # 请替换为你的163邮箱地址
    password: "your_authorization_password"  # 请替换为你的163邮箱授权密码
    use_tls: true          # 163邮箱支持TLS/SSL
    use_ssl: false         # 如果使用465端口，设置为true；587端口设置为false
  
  # 收件人列表
  recipients:
    - "recipient@example.com"  # 请替换为实际收件人邮箱
  
  # 邮件模板
  template:
    subject: "📊 AI新闻分析报告 - {date}"
    from_name: "AI新闻助手"

# 数据存储配置
database:
  # SQLite配置
  sqlite:
    db_path: "data/news.db"
    
  # 数据保留策略
  retention:
    max_days: 7   # 新闻保留天数（改为一周）
    cleanup_interval: 24  # 清理间隔（小时）

# 日志配置
logging:
  level: "INFO"
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  file: "data/logs/app.log"
  max_size: "10MB"
  backup_count: 5

# 调度器配置
scheduler:
  # 新的调度策略
  strategy:
    # 早上8点收集并发送邮件
    morning_collection:
      enabled: true
      hour: 8
      minute: 0
      send_email: true
    
    # 交易时间收集（8:00-16:00每3分钟）
    trading_hours:
      enabled: true
      start_hour: 8
      end_hour: 16
      interval_minutes: 3
      send_email: false
    
    # 晚上10点收集
    evening_collection:
      enabled: true
      hour: 22
      minute: 0
      send_email: false
    
    # 每日汇总邮件（23:30）
    daily_summary:
      enabled: true
      hour: 23
      minute: 30
  
  # 错误重试配置
  retry:
    max_attempts: 3
    retry_delay: 300  # 5分钟后重试
  
  # 任务超时配置（秒）
  timeouts:
    news_collection: 600    # 10分钟
    ai_analysis: 1800      # 30分钟
    email_sending: 300     # 5分钟
  
# 数据保留配置
retention:
  max_days: 7                  # 数据保留天数

# 系统配置
system:
  timezone: "Asia/Shanghai"
  user_agent: "AI-News-Collector/1.0"
  request_timeout: 30
  max_concurrent_requests: 5 